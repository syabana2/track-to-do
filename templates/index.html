<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <h1>ğŸ“‹ Task Tracker</h1>
            <div class="nav-buttons">
                <button onclick="showView('dashboard')" class="nav-btn">Dashboard</button>
                <button onclick="showView('todo')" class="nav-btn active">Todo List</button>
                <button onclick="showView('kanban')" class="nav-btn">Kanban</button>
                <button onclick="showView('credentials')" class="nav-btn">ğŸ” Server Credentials</button>
            </div>
        </nav>

        <!-- Global Filters -->
        <div class="filters-container">
            <div class="filter-group">
                <label>ğŸ” Search by Title</label>
                <input type="text" id="filter-search" placeholder="Search tasks..." onkeyup="applyFilters()">
            </div>
            <div class="filter-group">
                <label>ğŸ“ Filter by Project</label>
                <select id="filter-project" onchange="applyFilters()">
                    <option value="">All Projects</option>
                </select>
            </div>
            <div class="filter-group">
                <label>ğŸ¯ Filter by Priority</label>
                <select id="filter-priority" onchange="applyFilters()">
                    <option value="">All Priorities</option>
                    <option value="high">ğŸ”´ High</option>
                    <option value="medium">ğŸŸ¡ Medium</option>
                    <option value="low">ğŸŸ¢ Low</option>
                </select>
            </div>
            <div class="filter-group">
                <label>ğŸ“Š Filter by Status</label>
                <select id="filter-status" onchange="applyFilters()">
                    <option value="">All Status</option>
                    <option value="todo">Todo</option>
                    <option value="in-progress">In Progress</option>
                    <option value="done">Done</option>
                </select>
            </div>
            <div class="filter-group">
                <label>ğŸ“… Date From</label>
                <input type="date" id="filter-date-from" onchange="applyFilters()">
            </div>
            <div class="filter-group">
                <label>ğŸ“… Date To</label>
                <input type="date" id="filter-date-to" onchange="applyFilters()">
            </div>
            <div class="filter-group filter-actions">
                <button onclick="clearFilters()" class="btn-clear-filter">Clear All Filters</button>
            </div>
        </div>

        <!-- Dashboard View -->
        <div id="dashboard-view" class="view" style="display: none;">
            <h2>ğŸ“Š Dashboard</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="stat-todo">0</div>
                    <div class="stat-label">Todo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-in-progress">0</div>
                    <div class="stat-label">In Progress</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-done">0</div>
                    <div class="stat-label">Done</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-completed-today">0</div>
                    <div class="stat-label">Completed Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-total-time">0h 0m</div>
                    <div class="stat-label">Total Time</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-avg-time">0h 0m</div>
                    <div class="stat-label">Avg Time/Task</div>
                </div>
            </div>
            
            <div class="charts-container">
                <div class="chart-card">
                    <h3>ğŸ“ˆ Tasks Created - Last 7 Days</h3>
                    <canvas id="tasks-created-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>âœ… Tasks Completed - Last 7 Days</h3>
                    <canvas id="tasks-completed-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Todo List View -->
        <div id="todo-view" class="view">
            <div class="section-header">
                <h2>âœ… Todo List</h2>
                <button onclick="openAddTaskModal()" class="btn-primary">+ Add Task</button>
            </div>
            <div id="todo-list" class="task-list"></div>
        </div>

        <!-- Kanban View -->
        <div id="kanban-view" class="view" style="display: none;">
            <h2>ğŸ“Œ Kanban Board</h2>
            <div class="kanban-board">
                <div class="kanban-column">
                    <h3>ğŸ“ Todo</h3>
                    <div id="kanban-todo" class="kanban-tasks" data-status="todo"></div>
                </div>
                <div class="kanban-column">
                    <h3>âš™ï¸ In Progress</h3>
                    <div id="kanban-in-progress" class="kanban-tasks" data-status="in-progress"></div>
                </div>
                <div class="kanban-column">
                    <h3>âœ”ï¸ Done</h3>
                    <div id="kanban-done" class="kanban-tasks" data-status="done"></div>
                </div>
            </div>
        </div>

        <!-- Server Credentials View -->
        <div id="credentials-view" class="view" style="display: none;">
            <div class="section-header">
                <h2>ğŸ” Server Credentials</h2>
                <button onclick="openAddCredentialModal()" class="btn-primary">+ Add Credential</button>
            </div>
            <div id="credentials-list" class="credentials-grid"></div>
        </div>

        <!-- Add/Edit Task Modal -->
        <div id="task-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-title">Add New Task</h3>
                    <span class="close" onclick="closeModal()">&times;</span>
                </div>
                <form id="task-form" onsubmit="saveTask(event)">
                    <input type="hidden" id="task-id">
                    
                    <div class="form-section">
                        <div class="form-group-full">
                            <label>Task Title *</label>
                            <input type="text" id="task-title" required placeholder="Enter task title">
                        </div>
                        
                        <div class="form-group-full">
                            <label>Description</label>
                            <textarea id="task-description" rows="3" placeholder="Add task description (optional)"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <div class="form-row-2">
                            <div class="form-group">
                                <label>ğŸ“… Created Date</label>
                                <input type="date" id="task-created-date">
                            </div>
                            <div class="form-group">
                                <label>ğŸ“… Due Date</label>
                                <input type="date" id="task-due-date">
                            </div>
                        </div>
                        
                        <div class="form-row-2">
                            <div class="form-group">
                                <label>ğŸ“ Project</label>
                                <input type="text" id="task-project" list="project-list" placeholder="Select or type project name">
                                <datalist id="project-list"></datalist>
                            </div>
                            <div class="form-group">
                                <label>ğŸ¯ Priority</label>
                                <select id="task-priority">
                                    <option value="low">ğŸŸ¢ Low</option>
                                    <option value="medium" selected>ğŸŸ¡ Medium</option>
                                    <option value="high">ğŸ”´ High</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row-2">
                            <div class="form-group">
                                <label>ğŸ“Š Status</label>
                                <select id="task-status">
                                    <option value="todo">ğŸ“ Todo</option>
                                    <option value="in-progress">âš™ï¸ In Progress</option>
                                    <option value="done">âœ… Done</option>
                                </select>
                            </div>
                            <div class="form-group"></div>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" onclick="closeModal()" class="btn-secondary">Cancel</button>
                        <button type="submit" class="btn-primary">Save Task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

        <!-- Add/Edit Credential Modal -->
        <div id="credential-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="credential-modal-title">Add Server Credential</h3>
                    <span class="close" onclick="closeCredentialModal()">&times;</span>
                </div>
                <form id="credential-form" onsubmit="saveCredential(event)">
                    <input type="hidden" id="credential-id">
                    
                    <div class="form-section">
                        <div class="form-group-full">
                            <label>Title *</label>
                            <input type="text" id="credential-title" required placeholder="e.g., Production Server">
                        </div>
                        
                        <div class="form-group-full">
                            <label>ğŸ“ Project</label>
                            <input type="text" id="credential-project" list="credential-project-list" placeholder="Select or type project name">
                            <datalist id="credential-project-list"></datalist>
                        </div>
                        
                        <div class="form-group-full">
                            <label>IP Address *</label>
                            <input type="text" id="credential-ip" required placeholder="e.g., 192.168.1.100">
                        </div>
                        
                        <div class="form-group-full">
                            <label>Password *</label>
                            <input type="password" id="credential-password" required placeholder="Enter password">
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" onclick="closeCredentialModal()" class="btn-secondary">Cancel</button>
                        <button type="submit" class="btn-primary">Save Credential</button>
                    </div>
                </form>
            </div>
        </div>

    <script src="/static/script.js"></script>
</body>
</html>
